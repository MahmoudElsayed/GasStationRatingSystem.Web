#pragma checksum "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\People\Views\User\_Scripts.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "977c86cefba750d9b6018c1397694e6739a1f0e8"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_People_Views_User__Scripts), @"mvc.1.0.view", @"/Areas/People/Views/User/_Scripts.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 2 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\People\Views\_ViewImports.cshtml"
using GasStationRatingSystem;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\People\Views\_ViewImports.cshtml"
using GasStationRatingSystem.DTO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\People\Views\_ViewImports.cshtml"
using GasStationRatingSystem.Common;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"977c86cefba750d9b6018c1397694e6739a1f0e8", @"/Areas/People/Views/User/_Scripts.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"381014176629ca87e8b176903734634c3c8f1098", @"/Areas/People/Views/_ViewImports.cshtml")]
    public class Areas_People_Views_User__Scripts : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("<script>\r\n    let form = $(\'form\').first();\r\n    form.submit(function (e) {\r\n        e.preventDefault();\r\n\r\n        var valid = form.valid();\r\n        if (valid) {\r\n            Save();\r\n        }\r\n    });\r\n    function Save() {\r\n\r\n        $.post(\'");
#nullable restore
#line 13 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\People\Views\User\_Scripts.cshtml"
           Write(Url.GetAction("Save"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"', form.serialize() , function (res) {

            if (res.status) {
                alertify.success(res.message);
                form[0].reset();
                $('#tbl').DataTable().ajax.reload();
            }
            else {
                alertify.alert(res.message).setHeader('");
#nullable restore
#line 21 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\People\Views\User\_Scripts.cshtml"
                                                  Write(AppConstants.Messages.StopTitle);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"');

            }




        });

    }
    function LoadTable() {
        $('#tbl').DataTable().destroy();
            dt = $('#tbl').DataTable({ ""columnDefs"": [{ ""defaultContent"": ""-"", ""targets"": ""_all"" }],

                pageLength: 20,
                pagijngType: ""full_numbers"",
                serverSide: true,
                processing: true,
                lengthMenu: [ 10, 25, 50, 75, 100 ],
                sAjaxSource: '");
#nullable restore
#line 40 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\People\Views\User\_Scripts.cshtml"
                         Write(Url.GetAction("LoadDataTable"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
                sServerMethod: ""POST"",
                bPaginate: true,
                paging: true,
                dom: 'Blfrtip',
                buttons: [


                ],
                columns: [



                    {
                        data: null,
                        bSortable: false,
                        render: function (data, type, row, meta) {
                            return '<input type=""hidden"" name=""' + data.userName+'"" value=""'+data.id+'""><label>' + (meta.row + meta.settings._iDisplayStart + 1) + '</label>';
                        }

                    },



                    {
                        data: null,
                        bSortable: false,
                        render: function (data, type, row) { return '<label name=""UserName"">' + (data.userName ?? """") + '</label>' }

                    },
                    {
                        data: null,
                        bSortable: false,
                        ");
            WriteLiteral(@"render: function (data, type, row) { return '<label name=""Email"">' + (data.email ?? """") + '</label>' }

                    },
                    {
                        data: null,
                        bSortable: false,
                        render: function (data, type, row) { return '<label name=""CityId"" CityId=""'+data.cityId+'"">' + (data.cityName ?? """") + '</label>' }

                    },
                    {
                        data: null,
                        bSortable: false,
                        render: function (data, type, row) { return '<label>' + (data.addedDate ?? """") + '</label>' }

                    },
                    {
                        data: null,
                        bSortable: false,
                        render: function (data, type, row) {
                            return ` <label class=""switch"">
                                <input onchange='ChangeStatus(this);' name=""IsActive""  type=""checkbox"" ${data.isActive?'checked':''}>");
            WriteLiteral(@"
                                <span class=""slider round""></span>
                            </label>` }

                    },

             
                    {

                        data: null,
                        bSortable: false,
                        render: function (data, type, row) {
                            let btn = '';

                            btn += '<button title=""تعديل""  type=""button"" onclick=""Edit(this)"" class=""btn btn-info"" style=""margin:5px""><i class=""fa fa-pencil""></i></button>';
                            btn += '<button title=""حذف""  type=""button"" onclick=""Delete(this)"" class=""btn btn-info""><i class=""fa fa-trash""></i></i></button>';

                            return btn;

                        }
                    }
                ]
            });

        }

    function ShowUserPermissionModal(e) {
        var btn = $(e);

        var input = $(btn.closest('tr')).find('input[type=hidden]');
        var id = input.val();
        ");
            WriteLiteral("var name = input.attr(\'name\');\r\n        $.post(\'");
#nullable restore
#line 125 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\People\Views\User\_Scripts.cshtml"
           Write(Url.GetAction("ShowUserPermission"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"', {id:id} , function (res) {

            $('#tbodyUserPermissions').html('');

            $('#tbodyUserPermissions').html(res);
            $('#UserPermissions-Modal').modal();
            $('#tbodyUserPermissions').attr('userId', id);
            $('.lblName').html(name);



        });


    }

        function ShowUserClientModal(e) {
        var btn = $(e);
            var input = $(btn.closest('tr')).find('input[type=hidden]');
            var id = input.val();
            var name = input.attr('name');

        $.post('");
#nullable restore
#line 147 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\People\Views\User\_Scripts.cshtml"
           Write(Url.GetAction("ShowUserClient"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"', {id:id} , function (res) {

            $('#ddlUserClients').html('');

            $('#ddlUserClients').html(res);
            $('#UserClients-Modal').modal();
            $('#ddlUserClients').attr('userId', id);
            $('.lblName').html(name);



        });


    }



    function SaveUserPermission() {


            var ArrayOfObj = [];
        $.each($('#tbodyUserPermissions').children(), function (key, value) {
            var tr = $(value);
            var Permissions = tr.find('.Permission');
            $.each(Permissions, function (k, v) {
                var obj = new Object();
                var check = $(v);
                var PageId = tr.find('[name=PageId]').val();
                var HasPermission = check.prop('checked');

                obj.PageId = PageId;
                obj.HasPermission = HasPermission;
                obj.ActionName = check.attr('name');

                ArrayOfObj.push(obj);
            });


        });
        consol");
            WriteLiteral("e.log(ArrayOfObj);\r\n\r\n            $.post(\'");
#nullable restore
#line 189 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\People\Views\User\_Scripts.cshtml"
               Write(Url.GetAction("SaveUserPermission"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"', { userId: $('#tbodyUserPermissions').attr('userId'), mdl: ArrayOfObj }, function (res) {


                if (res.status) {
                    alertify.success(res.message);
                }
                else {
                    alertify.alert(res.message).setHeader('");
#nullable restore
#line 196 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\People\Views\User\_Scripts.cshtml"
                                                      Write(AppConstants.Messages.StopTitle);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"');

                }



            });


    }

        function SaveUserClient() {


            let ArrayOfObj = [];
            $.each($('#ddlUserClients').children(), function (key, value) {
                let obj = new Object();

                let ClientId = $(value).val();
                let UserId = $('#ddlUserClients').attr('userid')
                let ClientChecked = $(value).prop('selected');

                obj.ClientId = ClientId;
                obj.UserId = UserId;
                obj.ClientChecked = ClientChecked;
                ArrayOfObj.push(obj);
            });
          //  console.log(ArrayOfObj);
            let frm = new FormData();
            frm.append('userId', $('#ddlUserClients').attr('userId'));
            frm.append('mdl', JSON.stringify(ArrayOfObj));
           


            $.ajax({
                type: ""POST"",
                url: '");
#nullable restore
#line 232 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\People\Views\User\_Scripts.cshtml"
                 Write(Url.GetAction("SaveUserClient"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
                data: frm,
                contentType: false,
                processData: false,
                dataType: ""json"",
                success: function (res) {
                    if (res.status) {
                        alertify.success(res.message);
                    }
                    else {
                        alertify.alert(res.message).setHeader('");
#nullable restore
#line 242 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\People\Views\User\_Scripts.cshtml"
                                                          Write(AppConstants.Messages.StopTitle);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"');

                    }
                },
                failure: function (response) {
                },
                error: function (response) {
                }
            });
            


    }


  //#region Delete

        function Delete(e) {

        alertify.confirm().setting('modal', false);

        var btn = $(e);
        var id = $(btn.closest('tr')).find('input[type=hidden]').val();
        alertify.confirm('هل انت متاكد من اجراء العملية', '', function () {

            $.post('");
#nullable restore
#line 267 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\People\Views\User\_Scripts.cshtml"
               Write(Url.GetAction("Delete"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"', {id:id}, function (res) {

                 if (res.status) {
                     alertify.success(res.message);
                     btn.closest('tr').remove();


                }
                else {
                    alertify.alert(res.message).setHeader('توقف');

                }




            });

        },

            function () { }
        ).set('labels', { ok: 'نعم', cancel: 'لا' });
    }
        //#endregion
    function Edit(e) {
        var btn = $(e);
        var tr = $(btn.closest('tr'));
        var id = tr.find('input[type=hidden]').val();

        var UserName = tr.find('label[name=UserName]').text();
        var Email = tr.find('label[name=Email]').text();
        var IsActive = tr.find('input[name=IsActive]').prop('checked');
        var CityId = tr.find('label[name=CityId]').attr('CityId');

        console.log(IsActive);
        $('#txtUserName').val(UserName);
        $('#txtEmail').val(Email);
        $('#chkIsActive').prop('checked', ");
            WriteLiteral(@"IsActive);
        $('#CityId').val(CityId).trigger('change');

        $('#txtId').val(id);

        window.scrollTo(0, 0);

    }

    function ChangeStatus(e) {
          alertify.confirm().setting('modal', false);

        var btn = $(e);
        var id = $(btn.closest('tr')).find('input[type=hidden]').val();
        alertify.confirm('هل انت متاكد من اجراء العملية', '', function () {

            $.post('");
#nullable restore
#line 320 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\People\Views\User\_Scripts.cshtml"
               Write(Url.GetAction("ChangeStatus"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"', {id:id}, function (res) {

                 if (res.status) {
                     alertify.success(res.message);


                }
                else {
                    alertify.alert(res.message).setHeader('توقف');

                }




            });

        },

            function () { }
        ).set('labels', { ok: 'نعم', cancel: 'لا' });
    }
    function CheckAll(elem) {
        var checked = $(elem).prop('checked');
        var name = $(elem).attr('name');
        $(`input[name=${name}]`).prop('checked', checked);

    }
    $(document).ready(function () {
        LoadTable();
    });

</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591

#pragma checksum "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\Setting\Views\ManualDistribution\_Scripts.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "2ccc099fc06757fc222e970490dca321ac1390bc"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_Setting_Views_ManualDistribution__Scripts), @"mvc.1.0.view", @"/Areas/Setting/Views/ManualDistribution/_Scripts.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 2 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\Setting\Views\_ViewImports.cshtml"
using GasStationRatingSystem;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\Setting\Views\_ViewImports.cshtml"
using GasStationRatingSystem.DTO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\Setting\Views\_ViewImports.cshtml"
using GasStationRatingSystem.Common;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"2ccc099fc06757fc222e970490dca321ac1390bc", @"/Areas/Setting/Views/ManualDistribution/_Scripts.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"381014176629ca87e8b176903734634c3c8f1098", @"/Areas/Setting/Views/_ViewImports.cshtml")]
    public class Areas_Setting_Views_ManualDistribution__Scripts : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral(@"<script>
    let form = $('form').first();
    form.submit(function (e) {
        e.preventDefault();

        var valid = form.valid();
        if (valid) {
            Save();
        }
    });
    function Save() {
        var ArrayObj = [];
        $.each(ddlStations.val(), function (k, v) {
            var obj = new Object();

            obj.ID = $('#txtId').val();
            obj.UserId = ddlUsers.val();
            obj.StationId = v;
            ArrayObj.push(obj);
        });

        $.post('");
#nullable restore
#line 22 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\Setting\Views\ManualDistribution\_Scripts.cshtml"
           Write(Url.GetAction("Save"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"', { mdl: ArrayObj} , function (res) {

            if (res.status) {
                alertify.success(res.message);
                form[0].reset();
                $('#tbl').DataTable().ajax.reload();
            }
            else {
                alertify.alert(res.message).setHeader('");
#nullable restore
#line 30 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\Setting\Views\ManualDistribution\_Scripts.cshtml"
                                                  Write(AppConstants.Messages.StopTitle);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"');

            }




        });

    }
    function LoadTable() {
        $('#tbl').DataTable().destroy();
            dt = $('#tbl').DataTable({ ""columnDefs"": [{ ""defaultContent"": ""-"", ""targets"": ""_all"" }],

                pageLength: 20,
                pagijngType: ""full_numbers"",
                serverSide: true,
                processing: true,
                lengthMenu: [ 10, 25, 50, 75, 100 ],
                sAjaxSource: '");
#nullable restore
#line 49 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\Setting\Views\ManualDistribution\_Scripts.cshtml"
                         Write(Url.GetAction("LoadDataTable"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
                sServerMethod: ""POST"",
                bPaginate: true,
                paging: true,
                dom: 'Blfrtip',
                buttons: [


                ],
                columns: [



                    {
                        data: null,
                        bSortable: false,
                        render: function (data, type, row, meta) {
                            return '<input type=""hidden"" name=""' + data.userName + '"" value=""' + data.id + '""> <label style=""display:none;"" name=""CityId"" CityId=""' + data.cityId + '""></label> <label style=""display:none;"" name=""DistrictId"" DistrictId=""' + data.districtId + '""></label> <label>' + (meta.row + meta.settings._iDisplayStart + 1) + '</label>';
                        }

                    },



                    {
                        data: null,
                        bSortable: false,
                        render: function (data, type, row) { return '<label name=""UserId"" UserId=""' + data");
            WriteLiteral(@".userId +'"" >' + (data.userName ?? """") + '</label>' }

                    },
                    {
                        data: null,
                        bSortable: false,
                        render: function (data, type, row) { return '<label name=""StationId"" StationId=""' + data.stationId+'""    >' + (data.stationName ?? """") + '</label>' }

                    },

                    {
                        data: null,
                        bSortable: false,
                        render: function (data, type, row) { return '<label>' + (data.addedDate ?? """") + '</label>' }

                    },



                    {

                        data: null,
                        bSortable: false,
                        render: function (data, type, row) {
                            let btn = '';

                            btn += '<button title=""تعديل""  type=""button"" onclick=""Edit(this)"" class=""btn btn-info"" style=""margin:5px""><i class=""fa fa-pencil""></i></button>");
            WriteLiteral(@"';
                            btn += '<button title=""حذف""  type=""button"" onclick=""Delete(this)"" class=""btn btn-info""><i class=""fa fa-trash""></i></i></button>';

                            return btn;

                        }
                    }
                ]
            });

        }



  //#region Delete

        function Delete(e) {

        alertify.confirm().setting('modal', false);

        var btn = $(e);
        var id = $(btn.closest('tr')).find('input[type=hidden]').val();
        alertify.confirm('هل انت متاكد من اجراء العملية', '', function () {

            $.post('");
#nullable restore
#line 126 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\Setting\Views\ManualDistribution\_Scripts.cshtml"
               Write(Url.GetAction("Delete"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"', {id:id}, function (res) {

                 if (res.status) {
                     alertify.success(res.message);
                     btn.closest('tr').remove();


                }
                else {
                    alertify.alert(res.message).setHeader('توقف');

                }




            });

        },

            function () { }
        ).set('labels', { ok: 'نعم', cancel: 'لا' });
    }
        //#endregion
    function Edit(e) {
        var btn = $(e);
        var tr = $(btn.closest('tr'));
        var id = tr.find('input[type=hidden]').val();

        var UserName = tr.find('label[name=UserName]').text();
        var Email = tr.find('label[name=Email]').text();
        var IsActive = tr.find('input[name=IsActive]').prop('checked');
        var CityId = tr.find('label[name=CityId]').attr('CityId');
        var DistrictId = tr.find('label[name=DistrictId]').attr('DistrictId');

        var UserId = tr.find('label[name=UserId]').attr('UserId');
    ");
            WriteLiteral(@"    var StationId = tr.find('label[name=StationId]').attr('StationId');

        console.log(IsActive);
        $('#txtUserName').val(UserName);
        $('#txtEmail').val(Email);
        $('#chkIsActive').prop('checked', IsActive);

        LoadCities(CityId);
        LoadDistricts(CityId, DistrictId);
        LoadUsers(CityId, UserId);
        LoadStations(DistrictId, StationId);
        $('#txtId').val(id);

        window.scrollTo(0, 0);

    }

    var ddlDistricts = $('#ddlDistricts');
    var ddlStations = $('#StationId');
    var ddlUsers = $('#UserId');
    var ddlCities = $('#ddlCities');

    $(document).ready(function () {
        LoadCities();
        LoadTable();

    });

    //#region Helpers

    function LoadCities(id) {
          $.post('");
#nullable restore
#line 193 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\Setting\Views\ManualDistribution\_Scripts.cshtml"
             Write(Url.GetAction("LoadCities"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"', {  }, function (res) {
              ddlCities.children().remove();
              $.each(res, function (k, v) {
                  if (id==v.id) {
                      ddlCities.append(`<option selected='' value='${v.id}'>${v.name}</option>`);
                      ddlCities.trigger('change');
                      return;
                  }
                  else
                ddlCities.append(`<option value='${v.id}'>${v.name}</option>`);
            });
              ddlCities.trigger('change');

        });
    }
    function LoadDistricts(cityId,id) {
        if (cityId == '");
#nullable restore
#line 209 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\Setting\Views\ManualDistribution\_Scripts.cshtml"
                  Write(Guid.Empty);

#line default
#line hidden
#nullable disable
            WriteLiteral("\') {\r\n            return;\r\n        }\r\n        LoadUsers(cityId);\r\n        $.post(\'");
#nullable restore
#line 213 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\Setting\Views\ManualDistribution\_Scripts.cshtml"
           Write(Url.GetAction("LoadDistricts"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"', { CityId: cityId }, function (res) {
            ddlDistricts.children().remove();
            $.each(res, function (k, v) {
                if (id == v.id) {
                    ddlDistricts.append(`<option selected='' value='${v.id}'>${v.name}</option>`);
                    ddlDistricts.trigger('change');

                    return;
                }
                else
                    ddlDistricts.append(`<option value='${v.id}'>${v.name}</option>`);
            });
            ddlDistricts.trigger('change');

        });
    }
    function LoadUsers(cityId,id) {
        if (cityId == '");
#nullable restore
#line 230 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\Setting\Views\ManualDistribution\_Scripts.cshtml"
                  Write(Guid.Empty);

#line default
#line hidden
#nullable disable
            WriteLiteral("\') {\r\n            return;\r\n        }\r\n\r\n        $.post(\'");
#nullable restore
#line 234 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\Setting\Views\ManualDistribution\_Scripts.cshtml"
           Write(Url.GetAction("LoadUsers"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"', { CityId: cityId }, function (res) {
            ddlUsers.children().remove();
            $.each(res, function (k, v) {
                if (id == v.id) {
                    ddlUsers.append(`<option selected='' value='${v.id}'>${v.userName}</option>`);
                    return;
                }
                else
                    ddlUsers.append(`<option value='${v.id}'>${v.userName}</option>`);
            });

        });
    }
    function LoadStations(districtId, id) {
        $.ajax({
            type: ""POST"",
            url: '");
#nullable restore
#line 250 "D:\OneDrive\Documents\Projects\Other\GasStationRatingSystem\Site\GasStationRatingSystem.Web\Areas\Setting\Views\ManualDistribution\_Scripts.cshtml"
             Write(Url.GetAction("LoadStaions"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
            data: { DistrictId: districtId },
            async: false,
            dataType: ""json"",
            success: function (res) {
                ddlStations.children().remove();
                $.each(res, function (k, v) {
                    if (id == v.id) {
                        ddlStations.append(`<option selected='' value='${v.id}'>${v.name}</option>`);
                        console.log('id ' + id);
                        $('#StationId').val(id).trigger('change')
                        return;
                    }
                    else
                        ddlStations.append(`<option value='${v.id}'>${v.name}</option>`);
                });
            },
            error: function () {
            }
        });
    
    }



    //#endregion

    function SelectAllStation() {
        var btnSelectAll = $('#btnSelectAll');
        var SelectAll = btnSelectAll.attr('SelectAll')=='true';
        $('#StationId option').attr('selected', SelectAll).pa");
            WriteLiteral(@"rent().trigger('change');

        btnSelectAll.attr('SelectAll', !SelectAll);
        if (SelectAll == true) {
            btnSelectAll.text( 'الغاء التحديد')

        }
        else {
            btnSelectAll.text('تحديد الكل')

        }
    }
</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
